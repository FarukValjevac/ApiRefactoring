<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36 Edg/137.0.0.0" version="27.1.4">
  <diagram name="Page-1" id="jxJpjufu3x6XcI56HUoW">
    <mxGraphModel dx="4966" dy="2308" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-4" value="Export Request" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-3" value="Enduser&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-130" y="180" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-5" target="hRgYEM_Ee3KLI0hCjB-F-16">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="360" as="targetPoint" />
            <Array as="points">
              <mxPoint x="630" y="320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-22" value="Retrieve data (by user id)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-21">
          <mxGeometry x="0.3167" y="3" relative="1" as="geometry">
            <mxPoint x="27" y="-3" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-5" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="610" y="180" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-8" value="Memberships Export Service" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="170" y="130" width="200" height="490" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-9" value="Run export" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-8">
          <mxGeometry x="40" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-8" source="hRgYEM_Ee3KLI0hCjB-F-16" target="hRgYEM_Ee3KLI0hCjB-F-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-16" value="Generate Export csv" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-8">
          <mxGeometry x="40" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-8" source="hRgYEM_Ee3KLI0hCjB-F-24">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-24" value="Upload to S3" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-8">
          <mxGeometry x="40" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-30" value="Publish Email Event" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-8">
          <mxGeometry x="40" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-9" target="hRgYEM_Ee3KLI0hCjB-F-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-14" value="Run sql query" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-13">
          <mxGeometry x="-0.1937" y="-2" relative="1" as="geometry">
            <mxPoint x="17" y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-9" target="hRgYEM_Ee3KLI0hCjB-F-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="160" y="230" />
              <mxPoint x="160" y="230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-18" value="Send success (Read Email)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-17">
          <mxGeometry x="0.0273" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-19" value="Create index on user id" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="670" y="220" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-26" value="" style="sketch=0;pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;fillColor=#DF8C42;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam2.aws_s3;" vertex="1" parent="1">
          <mxGeometry x="470" y="433" width="50" height="54" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-24" target="hRgYEM_Ee3KLI0hCjB-F-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-31" value="Depends if email service is standalone" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="530" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-32" value="Email Service" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="170" y="880" width="200" height="490" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-32" source="hRgYEM_Ee3KLI0hCjB-F-33" target="hRgYEM_Ee3KLI0hCjB-F-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-33" value="Listen on email request" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-32">
          <mxGeometry x="40" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-32" source="hRgYEM_Ee3KLI0hCjB-F-35" target="hRgYEM_Ee3KLI0hCjB-F-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-35" value="Get user mailing data" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-32">
          <mxGeometry x="40" y="170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-32" source="hRgYEM_Ee3KLI0hCjB-F-37">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-37" value="Generate temporary S3 public url" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-32">
          <mxGeometry x="40" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-38" value="Send email with link" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-32">
          <mxGeometry x="40" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-39" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;rotation=-90;" vertex="1" parent="1">
          <mxGeometry x="230" y="570" width="60" height="320" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-40" value="EMAIL REQUEST TOPIC" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="180" y="710" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.833;entryY=0.531;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-30" target="hRgYEM_Ee3KLI0hCjB-F-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.067;entryY=0.528;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-33" target="hRgYEM_Ee3KLI0hCjB-F-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-44" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="450" y="1040" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-35" target="hRgYEM_Ee3KLI0hCjB-F-44">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="470" y="1070" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-46" value="" style="sketch=0;pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;fillColor=#DF8C42;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam2.aws_s3;" vertex="1" parent="1">
          <mxGeometry x="450" y="1183" width="50" height="54" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-37" target="hRgYEM_Ee3KLI0hCjB-F-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-38" target="hRgYEM_Ee3KLI0hCjB-F-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-49" value="Retrieve data" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-48">
          <mxGeometry x="-0.8261" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-103" value="Can limit requests on API gateway or request rate llimiter like nestjs throttler" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-50" y="110" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-104" value="UID, Header, S3 Link" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="685" width="180" height="85" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-105" value="Export Request" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-106" target="hRgYEM_Ee3KLI0hCjB-F-145">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1300" y="1610" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-106" value="Enduser&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="960" y="1580" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-107" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-109" target="hRgYEM_Ee3KLI0hCjB-F-113">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2050" y="1770" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2120" y="1730" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-108" value="Retrieve data (by user id)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-107">
          <mxGeometry x="0.3167" y="3" relative="1" as="geometry">
            <mxPoint x="27" y="-3" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-109" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="2100" y="1590" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-110" value="Memberships Export Service" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1460" y="1540" width="400" height="490" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-111" value="Run export" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-110">
          <mxGeometry x="250" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-112" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-110" source="hRgYEM_Ee3KLI0hCjB-F-113" target="hRgYEM_Ee3KLI0hCjB-F-115">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-113" value="Generate Export csv" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-110">
          <mxGeometry x="250" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-110" source="hRgYEM_Ee3KLI0hCjB-F-115">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="310" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-115" value="Upload to S3" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-110">
          <mxGeometry x="250" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-116" value="Publish Email Event" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-110">
          <mxGeometry x="250" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-145" value="Add to export queue" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-110">
          <mxGeometry x="40" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-151" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-110" source="hRgYEM_Ee3KLI0hCjB-F-149" target="hRgYEM_Ee3KLI0hCjB-F-111">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-149" value="Export processor (publish/subscribe)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-110">
          <mxGeometry x="40" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-152" value="Control concurrency" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-110">
          <mxGeometry x="15" y="270" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-117" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-111" target="hRgYEM_Ee3KLI0hCjB-F-109">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-118" value="Run sql query" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-117">
          <mxGeometry x="-0.1937" y="-2" relative="1" as="geometry">
            <mxPoint x="17" y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-119" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-145" target="hRgYEM_Ee3KLI0hCjB-F-106">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1120" y="1630" />
              <mxPoint x="1120" y="1630" />
            </Array>
            <mxPoint x="1390" y="1640" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-120" value="Send success (Read Email)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-119">
          <mxGeometry x="0.0273" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-121" value="Create index on user id" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2160" y="1630" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-122" value="" style="sketch=0;pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;fillColor=#DF8C42;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam2.aws_s3;" vertex="1" parent="1">
          <mxGeometry x="1960" y="1843" width="50" height="54" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-123" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-115" target="hRgYEM_Ee3KLI0hCjB-F-122">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-124" value="Depends if email service is standalone" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1120" y="1930" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-125" value="Email Service" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1260" y="2280" width="200" height="490" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-126" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-125" source="hRgYEM_Ee3KLI0hCjB-F-127" target="hRgYEM_Ee3KLI0hCjB-F-129">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-127" value="Email Request processor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-125">
          <mxGeometry x="40" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-128" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-125" source="hRgYEM_Ee3KLI0hCjB-F-129" target="hRgYEM_Ee3KLI0hCjB-F-131">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-129" value="Get user mailing data" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-125">
          <mxGeometry x="40" y="170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-130" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-125" source="hRgYEM_Ee3KLI0hCjB-F-131">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-131" value="Generate temporary S3 public url" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-125">
          <mxGeometry x="40" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-132" value="Send email with link" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-125">
          <mxGeometry x="40" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-133" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;rotation=-90;" vertex="1" parent="1">
          <mxGeometry x="1322.5" y="2002.5" width="60" height="250" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-134" value="Email Request Queue" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1272.5" y="2112.5" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-135" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.833;entryY=0.531;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-116" target="hRgYEM_Ee3KLI0hCjB-F-133">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-136" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.067;entryY=0.528;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-127" target="hRgYEM_Ee3KLI0hCjB-F-133">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-137" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="1540" y="2440" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-138" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-129" target="hRgYEM_Ee3KLI0hCjB-F-137">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1560" y="2470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-139" value="" style="sketch=0;pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;fillColor=#DF8C42;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam2.aws_s3;" vertex="1" parent="1">
          <mxGeometry x="1540" y="2583" width="50" height="54" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-140" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-131" target="hRgYEM_Ee3KLI0hCjB-F-139">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-141" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-132" target="hRgYEM_Ee3KLI0hCjB-F-106">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-142" value="Retrieve data" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-141">
          <mxGeometry x="-0.8261" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-143" value="Can limit requests on API gateway or request rate llimiter like nestjs throttler" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="1510" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-144" value="UID, Header, S3 Link" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1550" y="2085" width="180" height="85" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-146" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;rotation=-90;" vertex="1" parent="1">
          <mxGeometry x="1322.5" y="1672.5" width="60" height="175" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-147" value="Bull MQ (Export Queue)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1290" y="1745" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-148" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-145" target="hRgYEM_Ee3KLI0hCjB-F-146">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-150" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-149" target="hRgYEM_Ee3KLI0hCjB-F-147">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-154" value="Export Request" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-155" target="hRgYEM_Ee3KLI0hCjB-F-166">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2800" y="2930" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-155" value="Enduser&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="2460" y="2900" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-156" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-158" target="hRgYEM_Ee3KLI0hCjB-F-162">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3550" y="3090" as="targetPoint" />
            <Array as="points">
              <mxPoint x="3620" y="3050" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-157" value="Retrieve data (by user id)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-156">
          <mxGeometry x="0.3167" y="3" relative="1" as="geometry">
            <mxPoint x="27" y="-3" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-158" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1">
          <mxGeometry x="3600" y="2910" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-159" value="Backend" style="swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2960" y="2860" width="400" height="490" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-160" value="Run export" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-159">
          <mxGeometry x="250" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-161" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-159" source="hRgYEM_Ee3KLI0hCjB-F-162" target="hRgYEM_Ee3KLI0hCjB-F-164">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-162" value="Generate Export csv" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-159">
          <mxGeometry x="250" y="160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-164" value="Send email" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-159">
          <mxGeometry x="250" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-166" value="Add to export queue" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-159">
          <mxGeometry x="40" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-167" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="hRgYEM_Ee3KLI0hCjB-F-159" source="hRgYEM_Ee3KLI0hCjB-F-168" target="hRgYEM_Ee3KLI0hCjB-F-160">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-168" value="Export processor (publish/subscribe)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-159">
          <mxGeometry x="40" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-169" value="Control concurrency" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="hRgYEM_Ee3KLI0hCjB-F-159">
          <mxGeometry x="15" y="270" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-170" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-160" target="hRgYEM_Ee3KLI0hCjB-F-158">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-171" value="Run sql query" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-170">
          <mxGeometry x="-0.1937" y="-2" relative="1" as="geometry">
            <mxPoint x="17" y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-172" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-166" target="hRgYEM_Ee3KLI0hCjB-F-155">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2620" y="2950" />
              <mxPoint x="2620" y="2950" />
            </Array>
            <mxPoint x="2890" y="2960" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-173" value="Send success (Read Email)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="hRgYEM_Ee3KLI0hCjB-F-172">
          <mxGeometry x="0.0273" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-174" value="Create index on user id" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3660" y="2950" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-196" value="Can limit requests on API gateway or request rate llimiter like nestjs throttler" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2540" y="2830" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-198" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;rotation=-90;" vertex="1" parent="1">
          <mxGeometry x="2822.5" y="2992.5" width="60" height="175" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-199" value="Bull MQ (Export Queue)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2790" y="3065" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-200" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-166" target="hRgYEM_Ee3KLI0hCjB-F-198">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-201" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-168" target="hRgYEM_Ee3KLI0hCjB-F-199">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hRgYEM_Ee3KLI0hCjB-F-202" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hRgYEM_Ee3KLI0hCjB-F-164" target="hRgYEM_Ee3KLI0hCjB-F-155">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
